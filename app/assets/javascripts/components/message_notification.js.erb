(function (window, document, $) {
  window.MessageNotification = function (options) {
    var self = this;

    self.options = options;

    self.show = function () {
      // Only try to send when it exists.
      if (window.webkitNotifications) {
        var message_notification = new window.webkitNotifications.createNotification(
          '<%= asset_path('notification_icon.png') %>',
          self.options.sender + ' says:',
          self.options.message
        );
      }
    };
  };

  MessageNotification.ensurePermissionGranted = function () {
    if(window.webkitNotifications && window.webkitNotifications.checkPermission() != 0){
      window.webkitNotifications.requestPermission();
    }
  };
})(window, document, jQuery);
