(function (window) {
  window.MessageNotification = function (options) {
    var self = this;

    self.options = options;

    self.show = function () {
      // Only try to send when it exists.
      if (typeof window.Notification !== 'undefined') {
        var notification = new Notification(self.options.username + ' says:', {
          icon: '<%= asset_path 'notification_icon.png' %>',
          body: self.options.message
        });
        setTimeout(function (){
          notification.close();
        }, 5000);
      }
    };
  };

  MessageNotification.ensurePermissionGranted = function () {
    Notification.requestPermission();
  };
})(window);
